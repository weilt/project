
  <head>
      <link href="/model/lib/highlightjs/github.css" rel="stylesheet">
      <link href="/model/lib/datatables/jquery.dataTables.css" rel="stylesheet">
      <link href="/model/lib/select2/css/select2.min.css" rel="stylesheet">
      <link rel="stylesheet" href="/model/css/bracket.css">
      <link rel="stylesheet" href="/plugins/My97DatePicker/skin/WdatePicker.css">
  </head>

  <body>
<!--请求路径-->
  <div class="br-pageheader pd-y-15 pd-l-20">
      <nav class="breadcrumb pd-0 mg-0 tx-12">
          <a class="breadcrumb-item" href="/main">首页</a>
          <a class="breadcrumb-item" href="javascrip:void(0);" onclick="reSreachCommit(this,0)">模块管理</a>
      </nav>
  </div>

<!--页面标题-->
<!-- <div class="pd-x-20 pd-sm-x-30 pd-t-20 pd-sm-t-30">
    <h4 class="tx-gray-800 mg-b-5">模块管理</h4>
    <p class="mg-b-0">模块管理</p>
</div> -->

<div class="br-pagebody">
    <div class="br-section-wrapper">
        <div class="table-wrapper">
            <!--查询条件-->
            <div class="row">
                <div class="col-lg-2 mg-l-0 mg-b-20 mg-lg-t-0 ">
                          模块地址
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="请输入地址" name="paramMap_url" id="paramMap_url">
                        <input type="hidden" class="form-control" placeholder="请输入地址" name="paramMap_parentId" id="paramMap_parentId">

                    </div><!-- input-group -->
                </div>
              
                
               
                <div class="col-lg-2 mg-l-0 mg-b-20 mg-lg-t-0 pd-l-0">
                 <br />
                    <div class="input-group">
                        <button class="btn btn-primary mg-l-10" onclick="sreachCommit()"><i class="fa fa-search mg-r-10"></i> 搜索</button>
                        <button class="btn btn-primary mg-l-10" onclick="add(0,'顶级模块')" id="addSon"><i class="fa fa-plus mg-r-10"></i> 添加</button>
                    </div><!-- input-group -->
                </div>
            </div>

            <!--数据列表-->
            <div id="dynamic-table_wrapper" class="dataTables_wrapper no-footer">
                <table id="dynamic-table" class="table display responsive nowrap dataTable no-footer dtr-inline" module="grid" aria-describedby="dynamic-table_info" >
                    <thead>
                    <tr module="row">
                        <th class="wd-5p parsley-checkbox " tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" style="width: 129px;">

                            <label class="ckbox " >
                                <input type="checkbox" name="browser[]"><span></span>
                            </label>

                            <!--<label class='pos-rel'><input type='checkbox' class='ace'> <span class='lbl'></span></label>-->
                        </th>
                        <th class="wd-15p " tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" style="width: 129px;" >模块Id</th>
                        <th class="wd-20p " tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" style="width: 180px;" >模块名称</th>
                        <th class="wd-15p " tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" style="width: 129px;" >模块地址</th>
                        <th class="wd-15p " tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" style="width: 129px;" >父级模块</th>
                        <!-- <th class="wd-15p " tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" style="width: 129px;" >模块图标</th> -->
                        <th class="wd-15p " tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" style="width: 129px;" >模块描述</th>
                        <th class="wd-15p " tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" style="width: 129px;" >模块排序</th>
                        <th class="wd-15p " tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" style="width: 129px;" >是否隐藏</th>
                        <th class="wd-10p " tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" style="width: 78px;" >创建人</th>
                        <th class="wd-10p " tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" style="width: 78px;" >创建时间</th>
                        <th class="wd-25p " tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" style="width: 231px;">操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>





  <!--<div class="table-wrapper">-->
      <!--<table id="dynamic-table" class="table display responsive nowrap">-->
          <!--<thead>-->
          <!--<tr>-->
              <!--<th class="wd-5p"><label class='pos-rel'><input type='checkbox' class='ace'> <span class='lbl'></span></label></th>-->
              <!--<th class="wd-10p">ID</th>-->
              <!--<th class="wd-15p">名称</th>-->
              <!--<th class="wd-20p">性别</th>-->
              <!--<th class="wd-15p">时间</th>-->
              <!--<th class="wd-10p">TOKEN</th>-->
              <!--<th class="wd-25p">操作</th>-->
          <!--</tr>-->
          <!--</thead>-->
          <!--<tbody>-->

          <!--</tbody>-->
      <!--</table>-->
  <!--</div>&lt;!&ndash; table-wrapper &ndash;&gt;-->
  



      <footer class="br-footer">
        <div class="footer-left">
          <div class="mg-b-2">Copyright &copy; 2017. Bracket. All Rights Reserved.</div>
          <div>Attentively and carefully made by ThemePixels.</div>
        </div>
        <div class="footer-right d-flex align-items-center">
          <span class="tx-uppercase mg-r-10">Share:</span>
          <a target="_blank" class="pd-x-5" href="https://www.facebook.com/sharer/sharer.php?u=http%3A//themepixels.me/bracket/intro"><i class="fa fa-facebook tx-20"></i></a>
          <a target="_blank" class="pd-x-5" href="https://twitter.com/home?status=Bracket,%20your%20best%20choice%20for%20premium%20quality%20admin%20template%20from%20Bootstrap.%20Get%20it%20now%20at%20http%3A//themepixels.me/bracket/intro"><i class="fa fa-twitter tx-20"></i></a>
        </div>
      </footer>
      <script src="/model/lib/jquery/jquery.js"></script>
      <script src="/plugins/dataTable/js/ro.dataTable.js"></script>
      <script src="/plugins/dataTable/js/module/demo.dataTable.js"></script>
      <script src="/plugins/My97DatePicker/WdatePicker.js"></script>
      <script src="/public/base.js"></script>

<!--<script src="/model/lib/jquery.sparkline.bower/jquery.sparkline.min.js"></script>-->
<!--<script src="/model/lib/d3/d3.js"></script>-->

    <script>
    
    function searchByParent(id,name){
    	var _html='';
    	_html+='<a class="breadcrumb-item" href="javascrip:void(0);" onclick="reSreachCommit(this,'+id+')">'+name+'</a>'
    	$(".breadcrumb-item").parent().append(_html)
    	$("#paramMap_parentId").val(id);
    	$("#addSon").attr("onclick","add("+id+",'"+name+"')")
    	sreachCommit();
    }
    	function name() {
			
		}
    	function add(parentId,parentName){
    		var _html = '<form id="form">                                                                                                                                                                                  '
    		+'      <div class="br-pagebody">                                                                                                                                                                   '
    		+'                                                                                                                                                                                                  '
    		+'        <div class="br-section-wrapper">                                                                                                                                                          '
    		+'            <!--内容-->                                                                                                                                                                           '
    		+'            <div class="row">                                                                                                                                                                     '
    		+'                <p class="tx-11 tx-uppercase tx-spacing-2 mg-b-10 mg-t-10 tx-gray-600"><span class="tx-danger">*</span>模块名称:</p>                                                              '
    		+'                <div class="col-lg mg-l-10">                                                                                                                                                      '
    		+'                    <input class="form-control wd-250" placeholder="请输入模块名称" type="text" name="name" value="">                                                                             '
    		+'                </div><!-- col -->                                                                                                                                                                '
    		+'                <input type="hidden" name="parentId" value="'+parentId+'"/>                                                                                                                                   '
    		+'                <p class="tx-11 tx-uppercase tx-spacing-2 mg-b-10 mg-t-10 tx-gray-600"><span class="tx-danger">*</span>模块地址:</p>                                                              '
    		+'                <div class="col-lg mg-t-10 mg-lg-t-0 mg-l-10">                                                                                                                                    '
    		+'                    <input class="form-control wd-250" placeholder="请输入模块地址" type="text" name="url" value="">                                                                              '
    		+'                </div><!-- col -->                                                                                                                                                                '
    		+'                <p class="tx-11 tx-uppercase tx-spacing-2 mg-b-10 mg-t-10 tx-gray-600"><span class="tx-danger">*</span>模块图标:</p>                                                              '
    		+'                <div class="col-lg mg-t-10 mg-lg-t-0 mg-l-10">                                                                                                                                    '
    		+'                    <input class="form-control wd-250" placeholder="请输入模块图标" type="hidden" id ="moduleImage" name="moduleImage" value="icon ion-ios-filing-outline">  <ul class="row icon-list list-unstyled tx-32 mg-b-0" style="margin-left: 0;margin-right: 0;"> <li class="col-3 col-sm-2 col-lg-1 tx-center mg-t-10" ><i onclick="choice_icon()" id="choice_icon" style="cursor: pointer;" class="icon ion-ios-filing-outline"></i> </li> <ul>                                                                  '
    		+'                </div><!-- col -->                                                                                                                                                                '
    		+'            </div>                                                                                                                                                                                '
    		+'            <div class="row mg-t-20">                                                                                                                                                             '
    		+'                <p class="tx-11 tx-uppercase tx-spacing-2 mg-b-10 mg-t-10 tx-gray-600"><span class="tx-danger">*</span>模块描述:</p>                                                              '
    		+'                <div class="col-lg mg-l-10">                                                                                                                                                      '
    		+'                    <input class="form-control wd-50%" placeholder="请输入模块描述" type="text" name="description" value="">                                                                          '
    		+'                </div><!-- col -->                                                                                                                                                                '
    		+'            </div>                                                                                                                                                                                '
    		+'            <div class="row mg-t-20">                                                                                                                                                             '
    		+'                <p class="tx-11 tx-uppercase tx-spacing-2 mg-b-10 mg-t-10 tx-gray-600"><span class="tx-danger">*</span>模块排序:</p>                                                              '
    		+'                <div class="col-lg-3 mg-l-10">                                                                                                                                                    '
    		+'                    <select class="form-control select2 " name="sort"  data-placeholder="选择排序" tabindex="-1" aria-hidden="true">                             '
    		+'                        <option value="0">0</option>                                                                                                                                              '
    		+'                         <option value="1">1</option>                                                                                                                                             '
    		+'                          <option value="2">2</option>                                                                                                                                            '
    		+'                           <option value="3">3</option>                                                                                                                                           '
    		+'                            <option value="4">4</option>                                                                                                                                          '
    		+'                             <option value="5" selected="selected">5</option>                                                                                                                                         '
    		+'                              <option value="6">6</option>                                                                                                                                        '
    		+'                               <option value="7">7</option>                                                                                                                                       '
    		+'                                <option value="8">8</option>                                                                                                                                      '
    		+'                                 <option value="9">9</option>                                                                                                                                     '
    		+'                                                                                                                                                                                                  '
    		+'                                                                                                                                                                                                  '
    		+'                    </select>                                                                                                                                                                     '
    		+'                </div>                                                                                                                                                                            '
    		+'                <p class="tx-11 tx-uppercase tx-spacing-2 mg-l-50 mg-b-10 mg-t-10 tx-gray-600"><span class="tx-danger">*</span>是否隐藏:</p>                                                      '
    		+'                <div class="col-lg-0 mg-t-10 mg-l-20 wd-60">                                                                                                                                      '
    		+'                    <label class="rdiobox ">                                                                                                                                                      '
    		+'                        <input type="radio" name="isHide" value="1" checked><span>否</span>                                                                                                       '
    		+'                    </label>                                                                                                                                                                      '
    		+'                </div>                                                                                                                                                                            '
    		+'                <div class="col-lg-1 mg-t-10 m-l-0">                                                                                                                                              '
    		+'                    <label class="rdiobox">                                                                                                                                                       '
    		+'                        <input type="radio" name="isHide" value="2"><span>是</span>                                                                                                               '
    		+'                    </label>                                                                                                                                                                      '
    		+'                </div>                                                                                                                                                                            '
    		+'                <!-- col -->                                                                                                                                                                      '
    		+'            </div>                                                                                                                                                                                '
    		+'                                                                                                                                                                                                  '
    		+'            <div class="row mg-t-20">                                                                                                                                                             '
    		+'                <div class="btn btn-secondary btn-oblong bd-2 pd-x-30 pd-y-10 tx-uppercase tx-bold tx-spacing-1 tx-15" onclick="cancelFormLayer()">取消</div>                                     '
    		+'                <div class="btn btn-outline-primary btn-oblong bd-2 pd-x-30 pd-y-10 tx-uppercase tx-bold tx-spacing-1 tx-15 mg-l-10" onclick="insert(\'admin/module/insert\',\'form\')">确定</div>'
    		+'                                                                                                                                                                                                  '
    		+'            </div>                                                                                                                                                                                '
    		+'                                                                                                                                                                                                  '
    		+'        </div><!-- br-section-wrapper -->                                                                                                                                                         '
    		+'      </div><!-- br-pagebody -->                                                                                                                                                                  '
    		+'       </form>                                                                                                                                                                                    '
			    		fromEject(_html,parentName+"添加子模块",'80%','50%');
    	}
    	
    	
    	function edit(id,url,dec,type){
    		var _html = '';
    		$.ajax({
    	        url : url,
    	        type : "POST",
    	        data : {"id":id,"type":type},
    	        success : function (res) {
    	        	res = strToJson(res);
    	           
    	            	var module = res.data;
    	            	var moduleImage = module.moduleImage==null||module.moduleImage==''?"icon ion-ios-filing-outline":module.moduleImage
    	            	var a;
	            		if (module.isHide == 1){
	            			a = '<input type="radio" name="isHide" value="1" checked><span>否</span>         '
	            		}else{
	            			a = '<input type="radio" name="isHide" value="1"><span>否</span>         '
	            		}
	            		
	            		var b;
	            		if (module.isHide == 2){
	            			b = '<input type="radio" name="isHide" value="2" checked><span>是</span>         '
	            		}else{
	            			b = '<input type="radio" name="isHide" value="2"><span>是</span>         '
	            		}
	            		var c = '';
	            		for (var i = 0; i < 10; i++) {
							if (module.sort==i){
								c+='<option value="'+i+'" selected="selected">'+i+'</option>'
							}else{
								c+='<option value="'+i+'" >'+i+'</option>'
							}
							
						}
    	            	_html+='<form id="form">                                                                                                                                                                                  '
    	            		+'      <div class="br-pagebody">                                                                                                                                                                   '
    	            		+'                                                                                                                                                                                                  '
    	            		+'        <div class="br-section-wrapper">                                                                                                                                                          '
    	            		+'            <!--内容-->                                                                                                                                                                           '
    	            		+'                 <input type="hidden"  name="id" value="'+module.id+'"/> <input type="hidden"  name="type" value="2"/>                                                                                                                                                                                          '
    	            		+'            <div class="row">                                                                                                                                                                     '
    	            		+'                <p class="tx-11 tx-uppercase tx-spacing-2 mg-b-10 mg-t-10 tx-gray-600"><span class="tx-danger">*</span>模块名称:</p>                                                              '
    	            		+'                <div class="col-lg mg-l-10">                                                                                                                                                      '
    	            		+'                    <input class="form-control wd-250" placeholder="请输入模块名称" type="text" name="name" value="'+module.name+'">                                                                             '
    	            		+'                </div><!-- col -->                                                                                                                                                                '
    	            		+'                <p class="tx-11 tx-uppercase tx-spacing-2 mg-b-10 mg-t-10 tx-gray-600"><span class="tx-danger">*</span>模块地址:</p>                                                              '
    	            		+'                <div class="col-lg mg-t-10 mg-lg-t-0 mg-l-10">                                                                                                                                    '
    	            		+'                    <input class="form-control wd-250" placeholder="请输入模块地址" type="text" name="url" value="'+module.url+'">                                                                              '
    	            		+'                </div><!-- col -->                                                                                                                                                                '
    	            		+'                <p class="tx-11 tx-uppercase tx-spacing-2 mg-b-10 mg-t-10 tx-gray-600"><span class="tx-danger">*</span>模块图标:</p>                                                              '
    	            		+'                <div class="col-lg mg-t-10 mg-lg-t-0 mg-l-10">                                                                                                                                    '
    	            		+'                    <input class="form-control wd-250" placeholder="请输入模块图标" type="hidden" id ="moduleImage" name="moduleImage" value="'+moduleImage+'">  <ul class="row icon-list list-unstyled tx-32 mg-b-0" style="margin-left: 0;margin-right: 0;"> <li class="col-3 col-sm-2 col-lg-1 tx-center mg-t-10" ><i onclick="choice_icon()" id="choice_icon" style="cursor: pointer;" class="'+moduleImage+'"></i> </li> <ul>                                                                      '
    	            		+'                </div><!-- col -->                                                                                                                                                                '
    	            		+'            </div>                                                                                                                                                                                '
    	            		+'            <div class="row mg-t-20">                                                                                                                                                             '
    	            		+'                <p class="tx-11 tx-uppercase tx-spacing-2 mg-b-10 mg-t-10 tx-gray-600"><span class="tx-danger">*</span>模块描述:</p>                                                              '
    	            		+'                <div class="col-lg mg-l-10">                                                                                                                                                      '
    	            		+'                    <input class="form-control wd-50%" placeholder="请输入模块描述" type="text" name="description" value="'+module.description+'">                                                                          '
    	            		+'                </div><!-- col -->                                                                                                                                                                '
    	            		+'            </div>                                                                                                                                                                                '
    	            		+'            <div class="row mg-t-20">                                                                                                                                                             '
    	            		+'                <p class="tx-11 tx-uppercase tx-spacing-2 mg-b-10 mg-t-10 tx-gray-600"><span class="tx-danger">*</span>模块排序:</p>                                                              '
    	            		+'                <div class="col-lg-3 mg-l-10">                                                                                                                                                    '
    	            		+'                    <select class="form-control select2 " name="sort" value="'+module.sort+'" data-placeholder="选择排序" tabindex="-1" aria-hidden="true">                             '
    	            		+c
    	            		+'                                                                                                                                                                                                  '
    	            		+'                                                                                                                                                                                                  '
    	            		+'                    </select>                                                                                                                                                                     '
    	            		+'                </div>                                                                                                                                                                            '
    	            		+'                <p class="tx-11 tx-uppercase tx-spacing-2 mg-l-50 mg-b-10 mg-t-10 tx-gray-600"><span class="tx-danger">*</span>是否隐藏:</p>                                                      '
    	            		+'                <div class="col-lg-0 mg-t-10 mg-l-20 wd-60">                                                                                                                                      '
    	            		+'                    <label class="rdiobox ">                                                                                                                                                      '
    	            		+a
    	            		+'                    </label>                                                                                                                                                                      '
    	            		+'                </div>                                                                                                                                                                            '
    	            		+'                <div class="col-lg-1 mg-t-10 m-l-0">                                                                                                                                              '
    	            		+'                    <label class="rdiobox">                                                                                                                                                       '
    	            		+b
    	            		+'                    </label>                                                                                                                                                                      '
    	            		+'                </div>                                                                                                                                                                            '
    	            		+'                <!-- col -->                                                                                                                                                                      '
    	            		+'            </div>                                                                                                                                                                                                                                   '
					    		+'		                                                                                                                                                                                                    '
					    		+'                                                                                                                                                                                                          '
					    		+'            <div class="row mg-t-20" >                                                                                                                                                                    '
					    		+'                <div class="btn btn-secondary btn-oblong bd-2 pd-x-30 pd-y-10 tx-uppercase tx-bold tx-spacing-1 tx-15" onclick="cancelFormLayer()" >取消</div>                                                                  '
					    		+'                <div class="btn btn-outline-primary btn-oblong bd-2 pd-x-30 pd-y-10 tx-uppercase tx-bold tx-spacing-1 tx-15 mg-l-10" onclick="update(\''+url+'\',\'form\')">确定</div>    '
					    		+'            </div>                                                                                                                                                                                        '
					    		+'                                                                                                                                                                                                          '
					    		+'        </div>                                                                                                                                                              '
					    		+'      </div>                                                                                                                                                                         '
					    		+'</form>'
					    		
					    		fromEject(_html,dec,'80%','50%');
    	            
    	        }
    	    })
    	}
    	
    	function choice_icon(){
    		var _html = '';
    		_html+='<ul class="row icon-list list-unstyled tx-32 mg-b-0" style="margin-left: 0;margin-right: 0;">                                                                      '
    		+'                                                                                                                           '
    		+'	<li class="col-3 col-sm-2 col-lg-1 tx-center mg-t-10" ><i onclick="confirm_icon(this)" class="icon ion-ios-home-outline"></i></li>        '
    		+'	<li class="col-3 col-sm-2 col-lg-1 tx-center mg-t-10" ><i onclick="confirm_icon(this)" class="icon ion-ios-email-outline"></i></li>   '
    		+'	<li class="col-3 col-sm-2 col-lg-1 tx-center mg-t-10" ><i onclick="confirm_icon(this)" class="icon ion-ios-photos-outline"></i></li>    '
    		+'	<li class="col-3 col-sm-2 col-lg-1 tx-center mg-t-10" ><i onclick="confirm_icon(this)" class="icon ion-ios-filing-outline"></i></li>      '
    		+'	<li class="col-3 col-sm-2 col-lg-1 tx-center mg-t-10" ><i onclick="confirm_icon(this)" class="icon ion-ios-redo-outline"></i></li>        '
    		+'	<li class="col-3 col-sm-2 col-lg-1 tx-center mg-t-10" ><i onclick="confirm_icon(this)" class="icon ion-ios-pie-outline"></i></li>         '
    		+'	<li class="col-3 col-sm-2 col-lg-1 tx-center mg-t-10" ><i onclick="confirm_icon(this)" class="icon ion-ios-gear-outline"></i></li>    '
    		+'	<li class="col-3 col-sm-2 col-lg-1 tx-center mg-t-10" ><i onclick="confirm_icon(this)" class="icon ion-ios-bookmarks-outline"></i></li>     '
    		+'	<li class="col-3 col-sm-2 col-lg-1 tx-center mg-t-10" ><i onclick="confirm_icon(this)" class="icon ion-ios-navigate-outline"></i></li>    '
    		+'	<li class="col-3 col-sm-2 col-lg-1 tx-center mg-t-10" ><i onclick="confirm_icon(this)" class="icon ion-ios-briefcase-outline"></i></li>   '
    		+'	<li class="col-3 col-sm-2 col-lg-1 tx-center mg-t-10" ><i onclick="confirm_icon(this)" class="icon ion-ios-paper-outline"></i></li>       '
    		+'	<li class="col-3 col-sm-2 col-lg-1 tx-center mg-t-10" ><i onclick="confirm_icon(this)" class="icon ion-ios-book-outline"></i></li>    '
    		+'	<li class="col-3 col-sm-2 col-lg-1 tx-center mg-t-10" ><i onclick="confirm_icon(this)" class="icon ion-ios-list-outline"></i></li>    '
    		+'                                                                                                                           '
    		+'                                                                                                                           '
    		+'</ul>                                                                                                                      '
    		fromEject(_html,"选择图标",'40%','50%');
    	}
    	
    	//
    	function confirm_icon(b){
    		var icon = $(b).attr("class");
    		$("#choice_icon").attr("class",icon);
    		$("#moduleImage").val(icon);
    		layer.close(layer.index);
    	}
    </script>
  </body>
